(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{191:function(t,a,s){"use strict";s.r(a);var n=s(1),e=Object(n.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"æ¦‚è§ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ¦‚è§ˆ","aria-hidden":"true"}},[t._v("#")]),t._v(" æ¦‚è§ˆ")]),t._v(" "),s("p",[t._v("æœ€è¿‘å…¬å¸å‡†å¤‡æ‰©å¼ æµ·å¤–ä¸šåŠ¡ï¼Œæ‰€ä»¥è¦ç»™ Django ç³»ç»Ÿæ·»åŠ  "),s("strong",[t._v("å›½é™…åŒ–ä¸æœ¬åœŸåŒ–")]),t._v(" æ”¯æŒã€‚å›½é™…åŒ–ä¸€èˆ¬ç®€ç§° "),s("strong",[t._v("i18n")]),t._v("ï¼Œä»£è¡¨ Internationalization ä¸­ i å’Œ n æœ‰ 18 ä¸ªå­—æ¯ï¼›æœ¬åœ°åŒ–ç®€ç§° "),s("strong",[t._v("L10n")]),t._v("ï¼Œè¡¨ç¤º Localization ä¸­ l å’Œ n ä¸­æœ‰ 10 ä¸ªå­—æ¯ã€‚æœ‰è¶£çš„ä¸€ç‚¹æ˜¯ï¼Œä¸€èˆ¬ä¼šç”¨å°å†™çš„ i å’Œå¤§å†™çš„ L é˜²æ­¢æ··æ·†ã€‚")]),t._v(" "),s("p",[t._v("ç®€å•æ¥è¯´ï¼ši18n æ˜¯ä¸ºå›½é™…åŒ–æ­å»ºæ¡†æ¶ï¼ŒL10n æ˜¯é’ˆå¯¹ä¸åŒåœ°åŒºçš„é€‚é…ã€‚ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼š")]),t._v(" "),s("p",[t._v("i18n:")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("datetime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("now"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("strftime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'%Y/%m/%d'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# before i18n")]),t._v("\ndatetime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("now"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("strftime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timeformat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# after i18n")]),t._v("\n")])])]),s("p",[t._v("L10n:")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("timeformat "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cn'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'%Y/%m/%d'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'us'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'%m/%d/%Y'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fr'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'%d/%m/%Y'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("æ›´åŠ å…·ä½“çš„å®šä¹‰å¯ä»¥çœ‹ "),s("a",{attrs:{href:"https://www.w3.org/International/questions/qa-i18n",target:"_blank",rel:"noopener noreferrer"}},[t._v("W3C"),s("OutboundLink")],1),t._v(" çš„è§£é‡Šã€‚")]),t._v(" "),s("p",[t._v("i18n çš„èŒƒå›´éå¸¸å¹¿ï¼ŒåŒ…æ‹¬å¤šè¯­è¨€ã€æ—¶åŒºã€è´§å¸å•ä½ã€å•å¤æ•°ã€å­—ç¬¦ç¼–ç ç”šè‡³æ˜¯æ–‡å­—é˜…è¯»é¡ºåºï¼ˆ"),s("a",{attrs:{href:"https://en.wikipedia.org/wiki/Right-to-left",target:"_blank",rel:"noopener noreferrer"}},[t._v("RTL"),s("OutboundLink")],1),t._v("ï¼‰ç­‰ç­‰ã€‚è¿™ç¯‡æ–‡ç« åªå…³æ³¨ "),s("strong",[t._v("i18n çš„å¤šè¯­è¨€")]),t._v(" æ–¹é¢ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.loli.net/2019/05/06/5ccfe8a27e378.jpg",alt:"ä½¿ç”¨é˜¿æ‹‰ä¼¯è¯­çš„ windows ç³»ç»Ÿï¼Œæ¥æº"}})]),t._v(" "),s("blockquote",[s("p",[t._v("â†‘ é˜¿æ‹‰ä¼¯è¯­çš„ windows ç³»ç»Ÿï¼Œæ–‡å­—ç”šè‡³ç•Œé¢çš„æ–¹å‘éƒ½ä¸ä¸­æ–‡ç‰ˆçš„ç›¸åï¼ˆ"),s("a",{attrs:{href:"http://blog.dmitriev.de/Articles/24-JUL-2014-ArabianWindow.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("å›¾ç‰‡æ¥æº"),s("OutboundLink")],1),t._v("ï¼‰")])]),t._v(" "),s("h2",{attrs:{id:"åŸºæœ¬æ­¥éª¤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŸºæœ¬æ­¥éª¤","aria-hidden":"true"}},[t._v("#")]),t._v(" åŸºæœ¬æ­¥éª¤")]),t._v(" "),s("p",[t._v("Django ä½œä¸ºä¸€ä¸ªå¤§è€Œå…¨çš„æ¡†æ¶ï¼Œå·²ç»æä¾›äº†ä¸€å¥—å¤šè¯­è¨€çš„è§£å†³æ–¹æ¡ˆï¼Œæˆ‘ç¨å¾®å¯¹æ¯”äº†ä¸€ä¸‹ï¼Œå¹¶æ²¡èƒ½æ‰¾åˆ°åœ¨ Django ä½“ç³»ä¸‹æ¯”å®˜æ–¹æ–¹æ¡ˆè¿˜å¥½ç”¨çš„åº“ã€‚Django çš„æ–¹æ¡ˆå¯ä»¥ç®€å•åˆ†ä¸ºå››æ­¥ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("ä¸€äº›å¿…è¦çš„é…ç½®")]),t._v(" "),s("li",[t._v("åœ¨ä»£ç ä¸­æ ‡è®°éœ€è¦ç¿»è¯‘çš„æ–‡æœ¬")]),t._v(" "),s("li",[t._v("ä½¿ç”¨ "),s("code",[t._v("makemessages")]),t._v(" å‘½ä»¤ç”Ÿæˆ po æ–‡ä»¶")]),t._v(" "),s("li",[t._v("ç¼–è¯‘ "),s("code",[t._v("compilemessages")]),t._v(" å‘½ä»¤ç¼–è¯‘ mo æ–‡ä»¶")])]),t._v(" "),s("p",[t._v("ä¸‹é¢æˆ‘ä»¬è¯¦ç»†æ¥çœ‹çœ‹")]),t._v(" "),s("h3",{attrs:{id:"ç¬¬ä¸€æ­¥ï¼šé…ç½®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬ä¸€æ­¥ï¼šé…ç½®","aria-hidden":"true"}},[t._v("#")]),t._v(" ç¬¬ä¸€æ­¥ï¼šé…ç½®")]),t._v(" "),s("p",[t._v("é¦–å…ˆåœ¨ settings.py ä¸­åŠ å…¥è¿™å‡ ä¸ªå†…å®¹")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("LOCALE_PATHS "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__file__"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'language'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nMIDDLEWARE "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'django.middleware.locale.LocaleMiddleware'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nLANGUAGES "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'en'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'English'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zh'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ä¸­æ–‡'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[s("code",[t._v("LOCALE_PATHS")]),t._v("ï¼šæŒ‡å®šä¸‹é¢ç¬¬ä¸‰æ­¥å’Œç¬¬å››æ­¥ç”Ÿæˆæ–‡ä»¶çš„ä½ç½®ã€‚è€ç‰ˆçš„ Django éœ€è¦æ‰‹åŠ¨æ–°å»ºå¥½è¿™ä¸ªç›®å½•ã€‚")]),t._v(" "),s("p",[s("code",[t._v("LocaleMiddleware")]),t._v("ï¼šå¯ä»¥è®© Django è¯†åˆ«å¹¶é€‰æ‹©åˆé€‚çš„è¯­è¨€ã€‚")]),t._v(" "),s("p",[s("code",[t._v("LANGUAGES")]),t._v("ï¼šæŒ‡å®šäº†è¿™ä¸ªå·¥ç¨‹èƒ½æä¾›å“ªäº›è¯­è¨€ã€‚")]),t._v(" "),s("h3",{attrs:{id:"ç¬¬äºŒæ­¥ï¼šæ ‡è®°æ–‡æœ¬"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬äºŒæ­¥ï¼šæ ‡è®°æ–‡æœ¬","aria-hidden":"true"}},[t._v("#")]),t._v(" ç¬¬äºŒæ­¥ï¼šæ ‡è®°æ–‡æœ¬")]),t._v(" "),s("p",[t._v("ä¹‹å‰æ²¡æœ‰å¤šè¯­è¨€çš„éœ€è¦ï¼Œæ‰€ä»¥å¤§å®¶åœ¨ AJAX ç›¸åº”ä»£ç ä¸­ç›´æ¥å†™äº†ä¸­æ–‡ï¼Œæ¯”å¦‚è¿™æ ·ï¼š")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" JsonResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"msg"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å†…å®¹è¿‡é•¿"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("None")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("ç°åœ¨éœ€è¦å¤šè¯­è¨€äº†ï¼Œå°±éœ€è¦å‘Šè¯‰ Django å“ªäº›å†…å®¹æ˜¯éœ€è¦ç¿»è¯‘çš„ã€‚å¯¹äºä¸Šé¢çš„ä¾‹å­æ¥è¯´ï¼Œå°±æ˜¯å†™æˆè¿™æ ·ï¼š")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utils"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("translation "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" gettext "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" _\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" JsonResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"msg"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" _"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å†…å®¹è¿‡é•¿"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("None")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("è¿™é‡Œä½¿ç”¨ "),s("code",[t._v("gettext")]),t._v(" å‡½æ•°å°†åŸæœ¬çš„å­—ç¬¦ä¸²åŒ…è£¹èµ·æ¥ï¼Œè¿™æ ·çš„è¯ï¼ŒDjango å°±å¯ä»¥æ ¹æ®å½“å‰è¯­è¨€è¿”å›åˆé€‚çš„å­—ç¬¦ä¸²ã€‚ä¸€èˆ¬ä¼šä½¿ç”¨å•ä¸ªä¸‹åˆ’çº¿ "),s("code",[t._v("_")]),t._v(" æé«˜å¯è¯»æ€§ã€‚")]),t._v(" "),s("p",[t._v("å› ä¸ºæˆ‘å¸å‡ ä¹æ‰€æœ‰å‰åç«¯é€šä¿¡éƒ½ä½¿ç”¨ AJAXï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰æ€ä¹ˆç”¨ä¸Š Django çš„æ¨¡æ¿åŠŸèƒ½ï¼ˆé¡ºä¾¿ä¸€æï¼Œæˆ‘å¸å‰ç«¯ä½¿ç”¨çš„å¤šè¯­è¨€å·¥å…·æ˜¯ "),s("a",{attrs:{href:"https://github.com/i18next/i18next",target:"_blank",rel:"noopener noreferrer"}},[t._v("i18next"),s("OutboundLink")],1),t._v("ï¼‰ã€‚ä¸è¿‡åœ¨è¿™é‡Œä¹Ÿä¸€å¹¶å†™ä¸‹ Django æ¨¡æ¿çš„æ ‡è®°æ–¹æ³•ï¼š")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('<title>{% trans "This is the title." %}</title>\n<title>{% trans myvar %}</title>\n')])])]),s("p",[t._v("å…¶ä¸­ "),s("code",[t._v("trans")]),t._v(" æ ‡ç­¾å‘Šè¯‰ Django éœ€è¦ç¿»è¯‘è¿™ä¸ªæ‹¬å·é‡Œé¢çš„å†…å®¹ã€‚æ›´å…·ä½“çš„ç”¨æ³•å¯ä»¥å‚è€ƒ"),s("a",{attrs:{href:"https://docs.djangoproject.com/en/2.0/topics/i18n/translation/#trans-template-tag",target:"_blank",rel:"noopener noreferrer"}},[t._v("å®˜æ–¹æ–‡æ¡£"),s("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),s("h3",{attrs:{id:"ç¬¬ä¸‰æ­¥ï¼šmakemessages"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬ä¸‰æ­¥ï¼šmakemessages","aria-hidden":"true"}},[t._v("#")]),t._v(" ç¬¬ä¸‰æ­¥ï¼š"),s("code",[t._v("makemessages")])]),t._v(" "),s("p",[t._v("åœ¨æ‰§è¡Œè¿™ä¸€æ­¥ä¹‹å‰ï¼Œè¯·å…ˆé€šè¿‡ "),s("code",[t._v("xgettext --version")]),t._v(" ç¡®è®¤è‡ªå·±æ˜¯å¦å®‰è£…äº† "),s("a",{attrs:{href:"https://www.gnu.org/software/gettext/gettext.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("GNU gettext"),s("OutboundLink")],1),t._v("ã€‚GNU gettext æ˜¯ä¸€ä¸ªæ ‡å‡† i18n L10n åº“ï¼ŒDjango å’Œå¾ˆå¤šå…¶ä»–è¯­è¨€å’Œåº“çš„å¤šè¯­è¨€æ¨¡å—éƒ½è°ƒç”¨äº† GNU gettextï¼Œæ‰€ä»¥æ¥ä¸‹æ¥è®²çš„ä¸€äº› Django ç‰¹æ€§å®é™…ä¸Šè¦å½’åŠŸäº GNU gettextã€‚å¦‚æœæ²¡æœ‰å®‰è£…çš„è¯å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹æ³•å®‰è£…ï¼š")]),t._v(" "),s("p",[t._v("ubuntu:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" update\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gettext\n")])])]),s("p",[s("a",{attrs:{href:"https://stackoverflow.com/a/33896321",target:"_blank",rel:"noopener noreferrer"}},[t._v("macOS"),s("OutboundLink")],1),t._v(":")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ brew "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gettext\n$ brew "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("link")]),t._v(" --force gettext\n")])])]),s("p",[s("a",{attrs:{href:"https://docs.djangoproject.com/en/2.0/topics/i18n/translation/#gettext-on-windows",target:"_blank",rel:"noopener noreferrer"}},[t._v("windows"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("å®‰è£…å®Œ GNU gettext åï¼Œå¯¹ Django å·¥ç¨‹æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ python3 manage.py makemessages --local en\n")])])]),s("p",[t._v("ä¹‹åå¯ä»¥æ‰¾åˆ°ç”Ÿæˆçš„æ–‡ä»¶ï¼š"),s("code",[t._v("language/en/LC_MESSAGES/django.po")]),t._v("ã€‚æŠŠä¸Šé¢å‘½ä»¤ä¸­çš„ "),s("code",[t._v("en")]),t._v(" æ›¿æ¢æˆå…¶ä»–è¯­è¨€ï¼Œå°±å¯ä»¥ç”Ÿæˆä¸åŒè¯­è¨€çš„ "),s("code",[t._v("django.po")]),t._v(" æ–‡ä»¶ã€‚é‡Œé¢çš„å†…å®¹å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('#: path/file.py:397\nmsgid "è®¢å•å·²åˆ é™¤"\nmsgstr ""\n\n...\n')])])]),s("p",[t._v("Django ä¼šæ‰¾åˆ°è¢« "),s("code",[t._v("gettext")]),t._v(" å‡½æ•°åŒ…è£¹çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œä»¥ "),s("code",[t._v("msgid")]),t._v(" çš„å½¢å¼ä¿å­˜åœ¨ "),s("code",[t._v("django.po")]),t._v("ã€‚æ¯ä¸ª "),s("code",[t._v("msgid")]),t._v(" ä¸‹é¢çš„ "),s("code",[t._v("msgstr")]),t._v(" å°±ä»£è¡¨ä½ è¦æŠŠè¿™ä¸ª "),s("code",[t._v("msgid")]),t._v(" ç¿»è¯‘æˆä»€ä¹ˆã€‚é€šè¿‡ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶å¯ä»¥å‘Šè¯‰ Django ç¿»è¯‘çš„å†…å®¹ã€‚åŒæ—¶é€šè¿‡æ³¨é‡Šè¯´æ˜äº†è¿™ä¸ª "),s("code",[t._v("msgid")]),t._v(" å‡ºç°åœ¨å“ªä¸ªæ–‡ä»¶çš„å“ªä¸€è¡Œã€‚")]),t._v(" "),s("p",[t._v("å…³äºè¿™ä¸ªæ–‡ä»¶ï¼Œå‘ç°å‡ ç‚¹æœ‰è¶£çš„ç‰¹æ€§ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("Django ä¼šæŠŠå¤šä¸ªæ–‡ä»¶ä¸­ç›¸åŒçš„ "),s("code",[t._v("msgid")]),t._v(" å½’ç±»åœ¨ä¸€èµ·ã€‚ã€Œä¸€æ¬¡ç¼–è¾‘ï¼Œåˆ°å¤„ç¿»è¯‘ã€")]),t._v(" "),s("li",[t._v("å¦‚æœä»¥åæºç ä¸­æŸä¸ª "),s("code",[t._v("msgid")]),t._v(" è¢«åˆ äº†ï¼Œé‚£ä¹ˆå†æ¬¡æ‰§è¡Œ "),s("code",[t._v("makemessages")]),t._v(" å‘½ä»¤åï¼Œè¿™ä¸ª "),s("code",[t._v("msgid")]),t._v(" å’Œå®ƒçš„ "),s("code",[t._v("msgstr")]),t._v(" ä¼šä»¥æ³¨é‡Šçš„å½¢å¼ç»§ç»­ä¿å­˜åœ¨ "),s("code",[t._v("django.po")]),t._v(" ä¸­ã€‚")]),t._v(" "),s("li",[t._v("æ—¢ç„¶æºç ä¸­çš„å­—ç¬¦ä¸²åªæ˜¯ä¸€ä¸ªæ‰€è°“çš„ idï¼Œé‚£ä¹ˆæˆ‘å°±å¯ä»¥åœ¨æºç ä¸­å†™æ²¡æœ‰å®é™…å«ä¹‰çš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ "),s("code",[t._v('_("ERROR_MSG42")')]),t._v('ï¼Œç„¶åå°† "ERROR_MSG42" åŒæ—¶ç¿»è¯‘æˆä¸­æ–‡å’Œè‹±æ–‡ã€‚')]),t._v(" "),s("li",[t._v("è¿™ä¸ªæ–‡ä»¶ä¸­ä¼šä¿ç•™æ¨¡æ¿å­—ç¬¦ä¸²çš„å ä½ç¬¦ï¼Œæ¯”å¦‚å¯ä»¥ä½¿ç”¨å‘½åå ä½ç¬¦åšåˆ°åœ¨ä¸åŒè¯­è¨€ä¸­ä½¿ç”¨ä¸åŒå ä½ç¬¦é¡ºåºçš„åŠŸèƒ½ï¼Œä¸‹é¢ç»™å‡ºäº†ä¸€ä¸ªä¾‹å­ï¼š")])]),t._v(" "),s("p",[t._v("py file:")]),t._v(" "),s("pre",[s("code",[t._v("_('Today is {month} {day}.').format(month=m, day=d)\n_('Today is %(month)s %(day)s.') % {'month': m, 'day': d}\n")])]),t._v(" "),s("p",[t._v("po file:")]),t._v(" "),s("pre",[s("code",[t._v('msgid "Today is {month} {day}."\nmsgstr "Aujourd\'hui est {day} {month}."\n\nmsgid "Today is %(month)s %(day)s."\nmsgstr "Aujourd\'hui est %(day)s %(month)s."\n')])]),t._v(" "),s("h3",{attrs:{id:"ç¬¬å››æ­¥ï¼šcompilemessages"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬å››æ­¥ï¼šcompilemessages","aria-hidden":"true"}},[t._v("#")]),t._v(" ç¬¬å››æ­¥ï¼š"),s("code",[t._v("compilemessages")])]),t._v(" "),s("p",[t._v("ä¿®æ”¹å¥½ "),s("code",[t._v("django.po")]),t._v(" æ–‡ä»¶åï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ python3 manage.py compilemessages --local en\n")])])]),s("p",[t._v("Django ä¼šè°ƒç”¨ç¨‹åºï¼Œæ ¹æ® "),s("code",[t._v("django.po")]),t._v(" ç¼–è¯‘å‡ºä¸€ä¸ªåä¸º "),s("code",[t._v("django.mo")]),t._v(" çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½ç½®å’Œ "),s("code",[t._v("django.po")]),t._v(" æ‰€åœ¨ä½ç½®ç›¸åŒã€‚è¿™ä¸ªæ–‡ä»¶æ‰æ˜¯ç¨‹åºæ‰§è¡Œçš„æ—¶å€™ä¼šå»è¯»å–çš„æ–‡ä»¶ã€‚")]),t._v(" "),s("p",[t._v("æ‰§è¡Œå®Œä¸Šé¢å››æ­¥åï¼Œä¿®æ”¹æµè§ˆå™¨çš„è¯­è¨€è®¾ç½®ï¼Œå°±å¯ä»¥çœ‹åˆ° Django çš„ä¸åŒè¾“å‡ºäº†ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.loli.net/2019/05/06/5ccfe8a63ea5d.jpg",alt:"Chrome çš„è¯­è¨€è®¾ç½®"}})]),t._v(" "),s("blockquote",[s("p",[t._v("â†‘ Chrome çš„è¯­è¨€è®¾ç½®")])]),t._v(" "),s("h2",{attrs:{id:"é«˜çº§ç‰¹æ€§"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é«˜çº§ç‰¹æ€§","aria-hidden":"true"}},[t._v("#")]),t._v(" é«˜çº§ç‰¹æ€§")]),t._v(" "),s("h3",{attrs:{id:"i18n-patterns"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#i18n-patterns","aria-hidden":"true"}},[t._v("#")]),t._v(" "),s("code",[t._v("i18n_patterns")])]),t._v(" "),s("p",[t._v("æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›å¯ä»¥é€šè¿‡ URL æ¥é€‰æ‹©ä¸åŒçš„è¯­è¨€ã€‚è¿™æ ·åšæœ‰å¾ˆå¤šå¥½å¤„ï¼Œæ¯”å¦‚åŒä¸€ä¸ª URL è¿”å›çš„æ•°æ®çš„è¯­è¨€ä¸€å®šæ˜¯ä¸€è‡´çš„ã€‚Django çš„æ–‡æ¡£å°±ä½¿ç”¨äº†è¿™ç§åšæ³•ï¼š")]),t._v(" "),s("blockquote",[s("p",[t._v("ç®€ä½“ä¸­æ–‡ï¼šhttps://docs.djangoproject.com/zh-hans/2.0/")]),t._v(" "),s("p",[t._v("è‹±æ–‡ï¼šhttps://docs.djangoproject.com/en/2.0/")])]),t._v(" "),s("p",[t._v("å…·ä½“çš„åšæ³•æ˜¯åœ¨ URL ä¸­æ·»åŠ  "),s("code",[t._v("<slug:slug>")])]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("urlpatterns "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'category/<slug:slug>/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" news_views"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("category"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<slug:slug>/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" news_views"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("details"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("è¯¦ç»†çš„åšæ³•å¯ä»¥å‚è€ƒ Django çš„"),s("a",{attrs:{href:"https://docs.djangoproject.com/en/2.0/topics/i18n/translation/#url-internationalization",target:"_blank",rel:"noopener noreferrer"}},[t._v("å®˜æ–¹æ–‡æ¡£"),s("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),s("h3",{attrs:{id:"django-å¦‚ä½•å†³å®šä½¿ç”¨å“ªç§è¯­è¨€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#django-å¦‚ä½•å†³å®šä½¿ç”¨å“ªç§è¯­è¨€","aria-hidden":"true"}},[t._v("#")]),t._v(" Django å¦‚ä½•å†³å®šä½¿ç”¨å“ªç§è¯­è¨€")]),t._v(" "),s("p",[t._v("æˆ‘ä»¬ä¹‹å‰è®²è¿‡ "),s("code",[t._v("LocaleMiddleware")]),t._v(" å¯ä»¥å†³å®šä½¿ç”¨ä½•ç§è¯­è¨€ã€‚å…·ä½“æ¥è¯´ï¼Œ"),s("code",[t._v("LocaleMiddleware")]),t._v(" æ˜¯æŒ‰ç…§ä¸‹é¢çš„é¡ºåºï¼ˆä¼˜å…ˆçº§é€’å‡ï¼‰ï¼š")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("i18n_patterns")])]),t._v(" "),s("li",[s("code",[t._v("request.session[settings.LANGUAGE_SESSION_KEY]")])]),t._v(" "),s("li",[s("code",[t._v("request.COOKIES[settings.LANGUAGE_COOKIE_NAME]")])]),t._v(" "),s("li",[s("code",[t._v("request.META['HTTP_ACCEPT_LANGUAGE']")]),t._v("ï¼Œå³ HTTP è¯·æ±‚ä¸­çš„ "),s("code",[t._v("Accept-Language")]),t._v(" header")]),t._v(" "),s("li",[s("code",[t._v("settings.LANGUAGE_CODE")])])]),t._v(" "),s("p",[t._v("æˆ‘å¸é€‰æ‹©æŠŠè¯­è¨€ä¿¡æ¯æ”¾åˆ° Cookies ä¸­ï¼Œå½“ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©è¯­è¨€æ—¶ï¼Œå¯ä»¥è®©å‰ç«¯ç›´æ¥ä¿®æ”¹ Cookiesï¼Œè€Œä¸éœ€è¦è¯·æ±‚åå°çš„æŸä¸ªæ¥å£ã€‚æ²¡æœ‰æ‰‹åŠ¨è®¾ç½®è¿‡è¯­è¨€çš„ç”¨æˆ·å°±æ²¡æœ‰è¿™ä¸ª Cookiesï¼Œè·Ÿéšæµè§ˆå™¨è®¾ç½®ã€‚è¯è¯´ "),s("code",[t._v("settings.LANGUAGE_COOKIE_NAME")]),t._v(" çš„é»˜è®¤å€¼æ˜¯ "),s("code",[t._v("django_language")]),t._v("ï¼Œå‰ç«¯ä¸æƒ³åœ¨ä»–ä»¬çš„ä»£ç ä¸­å‡ºç° "),s("code",[t._v("django")]),t._v("ï¼Œæ‰€ä»¥æˆ‘åœ¨ "),s("code",[t._v("settings.py")]),t._v(" ä¸­æ·»åŠ äº† "),s("code",[t._v("LANGUAGE_COOKIE_NAME = app_language")]),t._v(" ğŸ˜‚ã€‚")]),t._v(" "),s("p",[t._v("ä½ ä¹Ÿå¯ä»¥é€šè¿‡ "),s("code",[t._v("request.LANGUAGE_CODE")]),t._v(" åœ¨ View ä¸­æ‰‹åŠ¨è·çŸ¥ "),s("code",[t._v("LocaleMiddleware")]),t._v(" é€‰ç”¨äº†å“ªç§è¯­è¨€ã€‚ä½ ç”šè‡³å¯ä»¥é€šè¿‡ "),s("code",[t._v("activate")]),t._v(" å‡½æ•°æ‰‹åŠ¨æŒ‡å®šå½“å‰çº¿ç¨‹ä½¿ç”¨çš„è¯­è¨€ï¼š")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utils"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("translation "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" activate\n\nactivate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'en'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"ugettext"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ugettext","aria-hidden":"true"}},[t._v("#")]),t._v(" ugettext")]),t._v(" "),s("p",[t._v("Python2 æ—¶ä»£ï¼Œä¸ºäº†åŒºåˆ†Â unicode strings å’Œ bytestringsï¼Œæœ‰ "),s("code",[t._v("ugettext")]),t._v(" å’Œ "),s("code",[t._v("gettext")]),t._v(" ä¸¤ä¸ªå‡½æ•°ã€‚åœ¨ Python3 ä¸­ï¼Œç”±äºå­—ç¬¦ä¸²ç¼–ç çš„ç»Ÿä¸€ï¼Œ"),s("code",[t._v("ugettext")]),t._v(" å’Œ "),s("code",[t._v("gettext")]),t._v(" æ˜¯ç­‰ä»·çš„ã€‚å®˜æ–¹è¯´æœªæ¥å¯èƒ½ä¼šåºŸå¼ƒ "),s("code",[t._v("ugettext")]),t._v("ï¼Œä½†æ˜¯æˆªæ­¢åˆ°ç°åœ¨ï¼ˆDjango 2.0ï¼‰ï¼Œ"),s("code",[t._v("ugettext")]),t._v(" è¿˜æ²¡åºŸå¼ƒã€‚")]),t._v(" "),s("h3",{attrs:{id:"gettext-lazy"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gettext-lazy","aria-hidden":"true"}},[t._v("#")]),t._v(" gettext_lazy")]),t._v(" "),s("p",[t._v("è¿™é‡Œå…ˆç”¨ä¸€ä¸ªä¾‹å­ç›´è§‚åœ°çœ‹ä¸€ä¸‹ "),s("code",[t._v("gettext_lazy")]),t._v(" å’Œ "),s("code",[t._v("gettext")]),t._v(" çš„åŒºåˆ«")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utils"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("translation "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" gettext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" gettext_lazy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" activate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" get_language\n\ngettext_str "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" gettext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello World!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ngettext_lazy_str "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" gettext_lazy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello World!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gettext_str"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# <class 'str'>")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gettext_lazy_str"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# <class 'django.utils.functional.lazy.<locals>.__proxy__'>")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"current language:"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" get_language"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# current language: zh")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gettext_str"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" gettext_lazy_str"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ä½ å¥½ä¸–ç•Œï¼ ä½ å¥½ä¸–ç•Œï¼")]),t._v("\n\nactivate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"en"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"current language:"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" get_language"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# current language: en")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gettext_str"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" gettext_lazy_str"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ä½ å¥½ä¸–ç•Œï¼ Hello World!")]),t._v("\n")])])]),s("p",[s("code",[t._v("gettext")]),t._v(" å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½†æ˜¯ "),s("code",[t._v("gettext_lazy")]),t._v(" è¿”å›çš„æ˜¯ä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡ä¼šåœ¨è¢«ä½¿ç”¨çš„æ—¶å€™ï¼Œæ‰æ ¹æ®å½“å‰çº¿ç¨‹ä¸­è¯­è¨€å†³å®šç¿»è¯‘æˆä»€ä¹ˆæ–‡å­—ã€‚")]),t._v(" "),s("p",[t._v("è¿™ä¸ªåŠŸèƒ½åœ¨ Django çš„ models ä¸­å°¤å…¶çš„æœ‰ç”¨ã€‚å› ä¸º models ä¸­å®šä¹‰å­—ç¬¦ä¸²çš„ä»£ç åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚åœ¨ä¹‹åçš„è¯·æ±‚ä¸­ï¼Œæ ¹æ®è¯­è¨€çš„ä¸åŒï¼Œè¿™ä¸ªæ‰€è°“å­—ç¬¦ä¸²è¦æœ‰ä¸åŒçš„è¡¨ç°ã€‚")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utils"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("translation "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" gettext_lazy "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" _\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyThing")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("help_text"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("_"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'This is the help text'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("YourThing")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    kind "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ForeignKey"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        ThingKind"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        on_delete"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CASCADE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        related_name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'kinds'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        verbose_name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("_"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'kind'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"ä½¿ç”¨-ast-fst-ä¿®æ”¹æºç "}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨-ast-fst-ä¿®æ”¹æºç ","aria-hidden":"true"}},[t._v("#")]),t._v(" ä½¿ç”¨ AST / FST ä¿®æ”¹æºç ")]),t._v(" "),s("p",[t._v("ç”±äºæˆ‘å¸å·¥ç¨‹éå¸¸åºå¤§ï¼ŒäººåŠ›ç»™æ¯ä¸ªå­—ç¬¦ä¸²æ·»åŠ  "),s("code",[t._v("_( ... )")]),t._v(" \bè¿‡äºç¹çã€‚æ‰€ä»¥æˆ‘è¯•å›¾å¯»æ‰¾ä¸€ç§è‡ªåŠ¨åŒ–çš„æ–¹å¼ã€‚")]),t._v(" "),s("p",[t._v("ä¸€å¼€å§‹é€‰æ‹©çš„æ˜¯ Python å†…ç½®çš„ "),s("code",[t._v("ast")]),t._v(" (Abstract syntax tree è¯­æ³•æŠ½è±¡æ ‘) æ¨¡å— ã€‚åŸºæœ¬æ€è·¯æ˜¯é€šè¿‡ "),s("code",[t._v("ast")]),t._v(" æ‰¾åˆ°å·¥ç¨‹ä¸­çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œå†ç»™è¿™äº›å­—ç¬¦ä¸²æ·»åŠ  "),s("code",[t._v("_( ... )")]),t._v("ã€‚æœ€åæŠŠä¿®æ”¹åçš„è¯­æ³•æ ‘é‡æ–°è½¬ä¸ºä»£ç ã€‚")]),t._v(" "),s("p",[t._v("ä½†æ˜¯ç”±äº "),s("code",[t._v("ast")]),t._v(" å¯¹æ ¼å¼ä¿¡æ¯çš„æ”¯æŒä¸ä½³ï¼Œä¿®æ”¹ä»£ç åå®¹æ˜“é€ æˆæ ¼å¼æ··ä¹±ã€‚æ‰€ä»¥æ‰¾åˆ°äº†åä¸º FST (Full Syntax Tree å…¨é¢æŠ½è±¡æ ‘) çš„æ”¹è¿›æ–¹å¼ã€‚æˆ‘é€‰æ‹©çš„ FST åº“æ˜¯ "),s("a",{attrs:{href:"https://github.com/PyCQA/redbaron",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("redbaron")]),s("OutboundLink")],1),t._v("ã€‚æ ¸å¿ƒçš„ä»£ç å¦‚ä¸‹ï¼š")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("root "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" RedBaron"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("original_code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" node "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" root"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_all"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"StringNode"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        has_chinese_char"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("and")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("not")]),t._v(" is_aleady_gettext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("and")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("not")]),t._v(" is_docstring"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("replace"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_({})"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmodified_code "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" root"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dumps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("æˆ‘æŠŠå®Œæ•´çš„ä»£ç æ”¾åˆ°äº† "),s("a",{attrs:{href:"https://gist.github.com/ocavue/8c4a8ca228ece5f8291572318c45cfd1",target:"_blank",rel:"noopener noreferrer"}},[t._v("Gist"),s("OutboundLink")],1),t._v(" ä¸Šï¼Œå› ä¸ºæ˜¯ä¸€ä¸ªä¸€æ¬¡æ€§è„šæœ¬ï¼Œå†™çš„æ¯”è¾ƒéšæ„ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒã€‚")]),t._v(" "),s("p",[t._v("ä½¿ç”¨ "),s("code",[t._v("redbaron")]),t._v(" çš„è¿‡ç¨‹ä¸­ä¹Ÿå‘ç°äº†ä¸€äº›é—®é¢˜ï¼Œä¸€å¹¶è®°å½•è¿™é‡Œï¼šæœ€å¤§é—®é¢˜æ˜¯ "),s("code",[t._v("redbaron")]),t._v(" "),s("a",{attrs:{href:"https://github.com/PyCQA/baron/pull/120",target:"_blank",rel:"noopener noreferrer"}},[s("strong",[t._v("å·²ç»åœæ­¢ç»´æŠ¤")]),s("OutboundLink")],1),t._v("äº†ï¼æ‰€ä»¥ä¸èƒ½æ”¯æŒä¸€äº›æ–°è¯­æ³•ï¼Œæ¯”å¦‚ Python3.6 çš„ f-stringã€‚å…¶æ¬¡æ˜¯è¿™ä¸ªåº“å’Œ "),s("code",[t._v("ast")]),t._v(" æ ‡å‡†åº“ç›¸æ¯”ï¼Œè¿è¡Œé€Ÿåº¦å¾ˆæ…¢ï¼Œæ¯æ¬¡è·‘è¿™ä¸ªè„šæœ¬æˆ‘çš„ç”µè„‘éƒ½å‘å‡ºäº†é£æœºå¼•æ“èˆ¬çš„å£°éŸ³ã€‚ç¬¬ä¸‰ç‚¹æ˜¯ä¼šäº§ç”Ÿä¸€äº›å¥‡æ€ªçš„æ ¼å¼ï¼š")]),t._v(" "),s("p",[t._v("ä¿®æ”¹å‰:")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("OutStockSheet "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æœªå‡ºåº“'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å·²å‡ºåº“'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å·²åˆ é™¤'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("ä¿®æ”¹åï¼ˆ"),s("code",[t._v("'å·²åˆ é™¤'")]),t._v(" å³è¾¹çš„æ‹¬å·è·‘åˆ°äº†ä¸‹ä¸€è¡Œï¼‰:")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("OutStockSheet "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" _"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æœªå‡ºåº“'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" _"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å·²å‡ºåº“'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" _"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å·²åˆ é™¤'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("æœ€åä¸€ç‚¹å€’æ˜¯å¯ä»¥é€šè¿‡æ ¼å¼åŒ–å·¥å…·è§£å†³ï¼Œé—®é¢˜ä¸å¤§ã€‚")]),t._v(" "),s("h3",{attrs:{id:"utf8-vs-utf-8"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#utf8-vs-utf-8","aria-hidden":"true"}},[t._v("#")]),t._v(" "),s("code",[t._v("utf8")]),t._v(" vs "),s("code",[t._v("utf-8")])]),t._v(" "),s("p",[t._v("é¡¹ç›®ä¸­æœ‰äº› py æ–‡ä»¶æ¯”è¾ƒè€ï¼Œåœ¨æ–‡ä»¶å¼€å¤´ä½¿ç”¨äº† "),s("code",[t._v("# coding: utf8")]),t._v(" çš„æ ‡ç¤ºã€‚å¯¹äº Python æ¥è¯´ï¼Œutf8 æ˜¯ utf-8 çš„åˆ«åï¼Œæ‰€ä»¥æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚Django åœ¨è°ƒç”¨ GNU gettext æ—¶ï¼Œä¼šä½¿ç”¨å‚æ•°æŒ‡å®šç¼–ç ä¸º utf-8ï¼Œä½†æ˜¯ GNU ä¹Ÿä¼šè¯»å–æ–‡ä»¶ä¸­çš„ç¼–ç æ ‡ç¤ºï¼Œè€Œä¸”å®ƒçš„ä¼˜å…ˆçº§æ›´é«˜ã€‚ä¸å¹¸çš„æ˜¯ utf8 å¯¹ GNU gettext æ¥è¯´æ˜¯ä¸€ä¸ªæœªçŸ¥ç¼–ç ï¼Œäºæ˜¯ GNU gettext ä¼šé™çº§ä½¿ç”¨ ASCII ç¼–ç ï¼Œç„¶ååœ¨é‡åˆ°ä¸­æ–‡å­—ç¬¦æ—¶æŠ¥é”™ï¼ˆçœŸç¬¨ï¼ï¼‰ï¼š")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('$ python3 manage.py makemessages --local en\n...\nxgettext: ./path/filename.py:1: Unknown encoding "utf8". Proceeding with ASCII instead.\nxgettext: Non-ASCII comment at or before ./path/filename.py:26.\n')])])]),s("p",[t._v("æ‰€ä»¥æˆ‘éœ€è¦æŠŠ "),s("code",[t._v("# coding: utf8")]),t._v(" æ”¹æˆ "),s("code",[t._v("# coding: utf-8")]),t._v("ï¼Œæˆ–è€…å¹²è„†åˆ æ‰è¿™è¡Œï¼Œåæ­£ Python3 å·²ç»é»˜è®¤ä½¿ç”¨ utf-8 ç¼–ç äº†ã€‚")]),t._v(" "),s("h3",{attrs:{id:"valueerror-plural-forms-expression-could-be-dangerous"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#valueerror-plural-forms-expression-could-be-dangerous","aria-hidden":"true"}},[t._v("#")]),t._v(" ValueError: plural forms expression could be dangerous")]),t._v(" "),s("p",[t._v("ç®€å•æ¥è¯´ï¼Œplural forms å°±æ˜¯ GNU gettext æ§åˆ¶è¯­è¨€çš„å•å¤æ•°è¡¨ç°çš„ä¸€ä¸ªé…ç½®ï¼Œè¯¦ç»†çš„è§£é‡Šå¯ä»¥å‚è€ƒ GNU gettext çš„"),s("a",{attrs:{href:"https://www.gnu.org/savannah-checkouts/gnu/gettext/manual/html_node/Plural-forms.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("å®˜æ–¹æ–‡æ¡£"),s("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),s("p",[t._v("å¦‚æœåœ¨æ“ä½œ Django å·¥ç¨‹çš„æ—¶å€™å‡ºç°äº† "),s("code",[t._v("ValueError: plural forms expression could be dangerous")]),t._v(" çš„æŠ¥é”™ï¼Œé‚£ä¹ˆå°±è¯´æ˜ django.po æ–‡ä»¶ä¸­çš„ plural forms é…ç½®çš„ä¸å¯¹ã€‚æˆ‘åœ¨é…ç½®ä¸­æ–‡çš„ç¿»è¯‘æ–‡ä»¶çš„æ—¶å€™é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œå¹¶é€šè¿‡äº†ä¸‹é¢çš„æ­¥éª¤è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("åˆ é™¤ django.mo æ–‡ä»¶ï¼šåªè¦è¿™ä¸ªæ–‡ä»¶æ²¡è¢«åˆ é™¤ï¼Œæ¯æ¬¡è·‘ manage.py éƒ½ä¼šæŠ¥é”™ï¼ŒåŒ…æ‹¬ "),s("code",[t._v("makemessages")]),t._v(" å’Œ "),s("code",[t._v("compilemessages")]),t._v(" å‘½ä»¤åœ¨å†…çš„æ“ä½œã€‚")]),t._v(" "),s("li",[t._v("ä¿®æ”¹ django.po æ–‡ä»¶ï¼šæˆ‘æ ¹æ®"),s("a",{attrs:{href:"https://groups.google.com/forum/#!topic/django-users/KnVGzJAR2xw",target:"_blank",rel:"noopener noreferrer"}},[t._v("è¿™ä¸ªé“¾æ¥"),s("OutboundLink")],1),t._v("ï¼Œå°† zh/LC_MESSAGES/django.po æ–‡ä»¶ä¸­çš„ "),s("code",[t._v('"Plural-Forms: nplurals=2; plural=(n != 1);\\n"')]),t._v(" æ”¹æˆäº† "),s("code",[t._v('"Plural-Forms: nplurals=1; plural=0;\\n"')]),t._v("ã€‚å…¶ä»–çš„éè‹±è¯­è¯­è¨€å¾ˆå¯èƒ½ä¹Ÿéœ€è¦å¯¹è¿™è¡Œä½œå‡ºç›¸åº”çš„ä¿®æ”¹ã€‚")]),t._v(" "),s("li",[t._v("ä½¿ç”¨ "),s("code",[t._v("compilemessages")]),t._v(" é‡æ–°ç”Ÿæˆ djanpo.mo æ–‡ä»¶ã€‚")])]),t._v(" "),s("p",[t._v("ç»è¿‡ä¸Šé¢çš„æ­¥éª¤ä¹‹åï¼Œä»¥åæ‰§è¡Œ "),s("code",[t._v("makemessages")]),t._v(" å’Œ "),s("code",[t._v("compilemessages")]),t._v(" å‘½ä»¤æ—¶ï¼Œä¸Šé¢ç¬¬ 2 æ­¥ä½œå‡ºçš„ä¿®æ”¹"),s("strong",[t._v("ä¸ä¼š")]),t._v("è¢«æ›¿æ¢ï¼Œæ‰€ä»¥å¯ä»¥æ”¾å¿ƒå¤§èƒ†åœ°ç”¨ã€‚")]),t._v(" "),s("h2",{attrs:{id:"æ€»ç»“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“","aria-hidden":"true"}},[t._v("#")]),t._v(" æ€»ç»“")]),t._v(" "),s("p",[t._v("Django (å’Œå…¶èƒŒåçš„ GNU gettext) çš„å¤šè¯­è¨€åŠŸèƒ½éå¸¸å…¨é¢ï¼Œå ªç§°åšå¤§ç²¾æ·±ï¼Œæ¯”å¦‚å¤„ç†å•å¤æ•°çš„ "),s("a",{attrs:{href:"https://docs.djangoproject.com/en/2.0/topics/i18n/translation/#pluralization",target:"_blank",rel:"noopener noreferrer"}},[t._v("ngettext"),s("OutboundLink")],1),t._v("ï¼Œå¤„ç†å¤šä¹‰è¯çš„ "),s("a",{attrs:{href:"https://docs.djangoproject.com/en/2.0/topics/i18n/translation/#contextual-markers",target:"_blank",rel:"noopener noreferrer"}},[t._v("pgettext"),s("OutboundLink")],1),t._v("ã€‚HTTP å“åº”ä¸­ä½¿ç”¨ç¿»è¯‘åçš„æ–‡æœ¬ï¼ˆ"),s("code",[t._v("msgstr")]),t._v("ï¼‰ï¼Œä½†æ˜¯åœ¨æ—¥å¿—ä¸­ç•™ä¸‹ç¿»è¯‘å‰æ–‡æœ¬ï¼ˆ"),s("code",[t._v("msgid")]),t._v("ï¼‰çš„ "),s("a",{attrs:{href:"https://docs.djangoproject.com/en/2.0/topics/i18n/translation/#gettext-noop",target:"_blank",rel:"noopener noreferrer"}},[t._v("gettext_noop"),s("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),s("p",[t._v("è¿™ç¯‡æ–‡ç« ä¸»è¦è®²äº†æˆ‘åœ¨å®è·µä¸­ç”¨åˆ°çš„åŠŸèƒ½å’Œé‡åˆ°çš„å‘ï¼Œå¸Œæœ›å¯ä»¥å¸®åŠ©å¤§å®¶äº†è§£ Django å¤šè¯­è¨€çš„åŸºæœ¬ç”¨æ³•ã€‚æ¬¢è¿å¤§å®¶è¯„è®ºğŸ‘ã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("è¯„è®ºåŠŸèƒ½è¿˜æœªä¸Šçº¿ï¼Œå¤§å®¶å¯ä»¥å»"),s("a",{attrs:{href:"https://juejin.im/post/5b3efc36e51d45197136eb09",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ˜é‡‘"),s("OutboundLink")],1),t._v("è¯„è®ºæœ¬æ–‡ã€‚")])]),t._v(" "),s("hr"),t._v(" "),s("p",[s("img",{attrs:{src:"https://i.creativecommons.org/l/by-nc-nd/2.5/cn/88x31.png",alt:"çŸ¥è¯†å…±äº«åè®®"}})]),t._v(" "),s("p",[t._v("æœ¬æ–‡é‡‡ç”¨"),s("a",{attrs:{href:"http://creativecommons.org/licenses/by-nc-nd/2.5/cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç¦æ­¢æ¼”ç» 2.5 ä¸­å›½å¤§é™†è®¸å¯åè®®"),s("OutboundLink")],1),t._v("è¿›è¡Œè®¸å¯ã€‚")])])},[],!1,null,null,null);a.default=e.exports}}]);